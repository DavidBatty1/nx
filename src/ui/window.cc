//----------------------------------------------------------------------------------------------------------------------
//! Implements the Window base class
//!
//! @author     Matt Davies
//----------------------------------------------------------------------------------------------------------------------

#include <ui/draw.h>
#include <ui/window.h>

//----------------------------------------------------------------------------------------------------------------------


Window::Window(Nx& nx)
    : m_nx(nx)
    // #todo: Flash this
    , m_showCursor(true)
{

}

//----------------------------------------------------------------------------------------------------------------------

void Window::apply(const State& state)
{
    m_currentState = state;
}

//----------------------------------------------------------------------------------------------------------------------

void Window::render(Draw& draw)
{
    draw.window(
        m_currentState.x,
        m_currentState.y,
        m_currentState.width,
        m_currentState.height,
        m_currentState.title,
        m_currentState.selected,
        Draw::attr(m_currentState.ink, m_currentState.paper));

    onRender(draw);
    draw.popBounds();
}

//----------------------------------------------------------------------------------------------------------------------

bool Window::key(const KeyEvent& kev)
{
    return onKey(kev);
}

//----------------------------------------------------------------------------------------------------------------------

void Window::text(char ch)
{
    onText(ch);
}

//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
