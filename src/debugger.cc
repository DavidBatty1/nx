//----------------------------------------------------------------------------------------------------------------------
// Debugger
//----------------------------------------------------------------------------------------------------------------------

#include "debugger.h"

//----------------------------------------------------------------------------------------------------------------------
// Constructor
//----------------------------------------------------------------------------------------------------------------------

Debugger::Debugger(Spectrum& speccy)
    : m_ui(speccy)
    , m_memoryDumpWindow(speccy)
    , m_disassemblyWindow(speccy)
    , m_cpuStatusWindow(speccy)
{
    m_disassemblyWindow.Select();
}

//----------------------------------------------------------------------------------------------------------------------
// Keyboard handling
//----------------------------------------------------------------------------------------------------------------------

void Debugger::onKey(sf::Keyboard::Key key)
{
    SelectableWindow::getSelected().keyPress(key);
}

//----------------------------------------------------------------------------------------------------------------------
// Rendering
//----------------------------------------------------------------------------------------------------------------------

void Debugger::render()
{
    Draw draw(m_ui.getPixels(), m_ui.getAttrs());

    m_ui.clear();
    m_memoryDumpWindow.draw(draw);
    m_disassemblyWindow.draw(draw);
    m_cpuStatusWindow.draw(draw);
    m_ui.render();
}

//----------------------------------------------------------------------------------------------------------------------
//----------------------------------------------------------------------------------------------------------------------
